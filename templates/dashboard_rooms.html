{% extends 'dashboard_base.html' %}

{% block head %}

{% endblock %}

{% block body %}
    <h3>Nový pokoj:</h3>
    <form class="update-form" method="POST" action="{{url_for('dash.room_create')}}">
        <input type="number" name="number" placeholder="Číslo pokoje">
        <input type="number" name="beds" placeholder="Počet postelí">
        <select name="type">
            <option value="ECON" selected>Economy</option>
            <option value="BUSS">Business</option>
            <option value="PREM">Premium</option>
        </select>
        <select name="hotel">
            {% for hotel in hotels %}
                <option value="{{hotel.id}}">{{hotel.name}}</option>
            {% endfor %}
        </select>
        <input type="number" step="0.01" name="price" placeholder="Cena za noc">
        <input type="submit" value="Vytvořit">
    </form>
    <h3>Vybrat hotel:</h3>
    <form class="update-form" method="POST" action="{{url_for('dash.room_index')}}">
        <select name="hotel" onchange="this.form.submit()">
            {% for hotel in hotels %}
                <option value="{{hotel.id}}" {% if (hotel.id|int == selected_h|int) %} selected {% endif %}>{{hotel.name}}</option>
            {% endfor %}
        </select>
    </form>
    <table class="master-table">
        <tr class="dash-table-head">
            <th>Číslo pokoje</th>
            <th>Počet postelí</th>
            <th>Typ</th>
            <th>Cena za noc</th>
            <th>Obsazený</th>
        </tr>
    {% for room in rooms %}
        <tr>
            <form class="update-form" method="POST" action="{{url_for('dash.room_update')}}">
                <input type="hidden" value="{{room.id}}" name="old_id">
                <th><input type="number" value="{{room.number}}" name="number"></th>
                <th><input type="number" value="{{room.number_of_beds}}" name="beds"></th>
                <th><select name="type">
                    <option value="ECON" {% if (room.room_type|string() == 'RoomType.ECON') %} selected {% endif %}>Economy</option>
                    <option value="BUSS" {% if (room.room_type|string() == 'RoomType.BUSS') %} selected {% endif %}>Business</option>
                    <option value="PREM" {% if (room.room_type|string() == 'RoomType.PREM') %} selected {% endif %}>Premium</option>
                </select></th>
                <th><input type="number" step="0.01" value="{{room.night_price}}" name="price"></th>
                <th><input type="checkbox" {% if room in occup_rooms %} checked {% endif %} disabled></th>
                <th><input type="submit" value="Update"></th>
            </form>
            <form class="update-form" method="POST" action="{{url_for('dash.room_delete')}}">
                <th><input type="hidden" value="{{room.id}}" name="id"></th>
                <th><input type="submit" value="Delete"></th>
            </form>
        </tr>
    {% endfor %}
{% endblock %}